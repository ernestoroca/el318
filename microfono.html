<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Microfono</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <audio id="player" controls></audio>
    <canvas id="canvas" width="480" height="640"></canvas>
    <script>
//https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/PlayingandSynthesizingSounds/PlayingandSynthesizingSounds.html

window.AudioContext = window.AudioContext || window.webkitAudioContext;
var player = document.getElementById('player');

navigator.mediaDevices.getUserMedia({ audio: true, video: false }).then(function(stream) {
    var context = new AudioContext();
    var input = context.createMediaStreamSource(stream)
    var processor = context.createScriptProcessor(1024,1,1);

    input.connect(processor);
    processor.connect(context.destination);

    processor.onaudioprocess = function(e){
        // Do something with the data, i.e Convert this to WAV
        console.log(e.inputBuffer);
    };
});
    </script>
  </body>
</html>
